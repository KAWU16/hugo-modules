{{ $class := .Get "class" }}
<details class="table-of-content {{$class}} test-2" open>
  <summary>
    {{ with i18n "toc" }}
      {{ . }}
    {{ else }}
      Spis treści
    {{ end }}
  </summary>

 {{ $toc := .Page.TableOfContents | replaceRE "<ul>[[:space:]]*<li>[[:space:]]*<ul>" "<ul>" | replaceRE "</ul>[[:space:]]*</li>[[:space:]]*</ul>" "</ul>" | safeHTML }}
    {{ $toc | safeHTML }}

    {{ $toc := .Page.TableOfContents }}
{{ if $toc }}
  <ul>
    {{ range $toc }}
      <li>
        <a href="#{{ .ID }}">{{ .Text }}</a>
      </li>
    {{ end }}
  </ul>
{{ else }}
  <p>Brak spisu treści do wyświetlenia.</p>
{{ end }}

</details>
