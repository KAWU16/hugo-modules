{{ $class := .Class }}
{{ $scratch := newScratch }}
{{ if not (.Collapsed | default true) }} 
  {{ $scratch.Set "openAttr" "open" }}
{{ else }}
  {{ $scratch.Set "openAttr" "" }}
{{ end }}
<details {{ $scratch.Get "openAttr" | safeHTMLAttr }} class="table-of-content {{$class}}" open>
  <summary>
    {{ with i18n "toc" }}
      {{ . }}
    {{ else }}
      Spis treści
    {{ end }}
  </summary>
  {{ if .Page.TableOfContents }}
  <ul>
    {{ range .Page.TableOfContents }}
      <li>
        <a href="#{{ .ID }}">{{ .Text }}</a>
      </li>
    {{ end }}
  </ul>
{{ else }}
  <p>Brak spisu treści do wyświetlenia.</p>
{{ end }}
</details>
